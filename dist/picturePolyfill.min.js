/*! picturePolyfill - v4.0.0 - 2014-07-18
* https://github.com/verlok/picturePolyfill/
* Copyright (c) 2014 Andrea "verlok" Verlicchi; Licensed MIT */
var picturePolyfill=function(a){"use strict";function b(){var a,b,c=document.createElement("img");if(a=document.getElementsByTagName("picture"),b=a[0],!a.length)return!1;try{return b.appendChild(c),b.removeChild(c),!0}catch(d){return!1}}var c,d,e,f=100,g=!1;return{_appendImg:function(a,b){var c=document.createElement("img");this._setAttrs(c,b),a.appendChild(c)},_setAttrs:function(a,b){for(var c in b)a.setAttribute(c,b[c])},_getAttrs:function(a,b){for(var c,d,e={},f=0,g=b.length;g>f;f+=1)c=b[f],d=a.getAttribute(c),d&&(e[c]=d);return e},_getAttrsList:function(a){for(var b=[],c=0,d=a.attributes,e=d.length;e>c;c++)b.push(d.item(c).nodeName);return b},_replacePicture:function(a,b){var c=document.createElement("picture"),d=this._getAttrs(a,this._getAttrsList(a));this._appendImg(c,b),this._setAttrs(c,d),a.parentNode.replaceChild(c,a)},_getSrcsetArray:function(a){for(var b,c,d,e=[],f=a.split(","),g=0,h=f.length;h>g;g+=1)b=f[g].trim().split(" "),d=1===b.length?1:parseFloat(b[b.length-1],10),c=b[0],e.push({pxr:d,src:c});return e.sort(function(a,b){var c=a.pxr,d=b.pxr;return d>c?-1:c>d?1:0})},_getSrcFromArray:function(a,b){var c=0,d=a.length,e=-1;if(!d)return null;do(a[c].pxr>=b||c===d-1)&&(e=c),c+=1;while(!(e>-1||c>=d));return a[e].src},_getSrcFromData:function(b){for(var c,d,e,f=0,g=b.length;g>f;f+=1)if(c=b[f],d=c.media,e=c.srcset,!d||a.matchMedia(d).matches)return e?this._getSrcFromArray(e,this._pxRatio):c.src;return null},_resetImg:function(a){var b=a.getElementsByTagName("img");b.length&&a.removeChild(b[0])},_setImg:function(a,b){var c,d,e,f,g,h=a.getElementsByTagName("img");if(h.length)g=b.src,f=h[0],f.getAttribute("src")!==g&&f.setAttribute("src",g);else{c=["width","height"];for(var i=0,j=c.length;j>i;i+=1)d=c[i],e=a.getAttribute(d),e&&(b[d]=e);this._appendSupport?this._appendImg(a,b):this._replacePicture(a,b)}},_getSourcesData:function(a){for(var b,c,d=[],e=a.getElementsByTagName("source"),f=0,g=e.length;g>f;f+=1)b=e[f],c=this._getAttrs(b,this._getAttrsList(b)),c.srcset&&(c.srcset=this._getSrcsetArray(c.srcset)),d.push(c);return d},_addListeners:function(){function b(){picturePolyfill.parse(document)}function c(){clearTimeout(e),e=setTimeout(b,f)}return!this.isUseful||g?!1:(a.addEventListener?(a.addEventListener("resize",c),a.addEventListener("DOMContentLoaded",function(){b(),a.removeEventListener("load",b)}),a.addEventListener("load",b)):a.attachEvent&&(a.attachEvent("onload",b),a.attachEvent("onresize",c)),void(g=!0))},initialize:function(){this._pxRatio=a.devicePixelRatio||1,this._mqSupport=!!a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,this._appendSupport=b(),this.isUseful=!a.HTMLPictureElement,c=[],d=0,this._addListeners()},parse:function(a,b){var e,f,g,h,i,j;if(!this.isUseful)return 0;null===b&&(b=!0),g=(a||document).getElementsByTagName("picture"),i=this._mqSupport;for(var k=0,l=g.length;l>k;k+=1)e=null,f=g[k],b&&(j=f.getAttribute("data-cache-index"),null!==j&&(e=c[j])),e||(e=this._getSourcesData(f),c[d]=e,f.setAttribute("data-cache-index",d),d+=1),h=0!==e.length&&i?this._getSrcFromData(e):f.getAttribute("data-default-src"),h?this._setImg(f,{src:h,alt:f.getAttribute("data-alt")}):this._resetImg(f);return k}}}(window);picturePolyfill.initialize(),picturePolyfill.parse();